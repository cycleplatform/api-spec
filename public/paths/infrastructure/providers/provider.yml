get:
  operationId: "getProvider"
  tags:
    - Providers
  parameters:
    - name: providerIdentifier
      description: The ID for the given provider.
      in: path
      required: true
      schema:
        type: string
  summary: Fetch Provider
  description: Requires the `infrastructure-providers-view` capability.
  responses:
    200:
      description: A single provider resource.
      content:
        application/json:
          schema:
            title: "FetchProviderReturn"
            type: object
            properties:
              data:
                $ref: ../../../../components/schemas/infrastructure/providers/Provider.yml
    default:
      $ref: ../../../../components/responses/errors/DefaultError.yml
patch:
  operationId: "updateProvider"
  tags:
    - Providers
  parameters:
    - name: providerIdentifier
      description: The identifier for the given provider. Can be `aws`, `gcp`, `equinix-metal`, `vultr`.
      in: path
      required: true
      schema:
        type: string
  summary: Update Provider
  description: Requires the `infrastructure-providers-manage` capability.
  requestBody:
    description: Parameters for updating a provider.
    content:
      application/json:
        schema:
          type: object
          required:
            - integration
          properties:
            integration:
              type: object
              description: An integration object defining the provider integration assets and endpoints.
              properties:
                native:
                  type: object
                  description: Nativly supported IAL provider integration.
                  required:
                    - identifier
                    - auth
                  properties:
                    identifier:
                      type: string
                      description: An identifier for the provider.
                    auth:
                      $ref: ../../../../components/schemas/infrastructure/providers/IALAuth.yml
                abstraction:
                  type: object
                  description: Custom provider information.
                  required:
                    - name
                    - base_url
                  properties:
                    name:
                      type: string
                      description: A name for the custom provider abstraction.
                    base_url:
                      type: string
                      description: The url to use when making calls to the abstraction for provision events.
                    auth:
                      $ref: ../../../../components/schemas/infrastructure/providers/IALAuth.yml
  responses:
    200:
      description: Returns a provider resource.
      content:
        application/json:
          schema:
            title: "ProviderUpdateReturn"
            type: object
            properties:
              data:
                $ref: ../../../../components/schemas/infrastructure/providers/Provider.yml
    default:
      $ref: ../../../../components/responses/errors/DefaultError.yml
delete:
  operationId: "removeProvider"
  tags:
    - Providers
  parameters:
    - name: providerIdentifier
      description: The identifier for the given provider. Can be `aws`, `gcp`, `equinix-metal`, `vultr`.
      in: path
      required: true
      schema:
        type: string
  summary: Remove Provider
  description: Requires the `infrastructure-providers-manage` capability.
  responses:
    202:
      description: Returns a task descriptor.
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: ../../../../components/schemas/jobs/TaskDescriptor.yml
    default:
      $ref: ../../../../components/responses/errors/DefaultError.yml
